{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/Services/subscription.service\";\nimport * as i3 from \"@angular/common\";\nfunction PaymentComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelement(1, \"clr-icon\", 9);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessage, \" \");\n  }\n}\nfunction PaymentComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelement(1, \"clr-icon\", 11);\n    i0.ɵɵelementStart(2, \"p\", 12);\n    i0.ɵɵtext(3, \"Loading subscription details...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PaymentComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵelement(1, \"clr-icon\", 14);\n    i0.ɵɵelementStart(2, \"p\", 15);\n    i0.ɵɵtext(3, \"Retrying payment... Please wait.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function PaymentComponent_div_8_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.cancelRetry());\n    });\n    i0.ɵɵtext(5, \" Cancel Retry \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PaymentComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"div\", 18)(2, \"h3\", 19);\n    i0.ɵɵtext(3, \"Payment Summary\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 20)(5, \"div\", 21)(6, \"span\", 22);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"span\", 23);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"p\", 24);\n    i0.ɵɵtext(11, \"for \");\n    i0.ɵɵelementStart(12, \"em\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"div\", 25)(15, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function PaymentComponent_div_9_Template_button_click_15_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.startPayment());\n    });\n    i0.ɵɵelement(16, \"clr-icon\", 27);\n    i0.ɵɵtext(17, \" Pay with PayPal \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"div\", 28);\n    i0.ɵɵelement(19, \"clr-icon\", 29);\n    i0.ɵɵtext(20, \" Secure payment processed by PayPal \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r3.paymentData.amount);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.paymentData.currency);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r3.paymentData.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r3.subscription.subid);\n  }\n}\nexport class PaymentComponent {\n  constructor(route, subscriptionService, router) {\n    this.route = route;\n    this.subscriptionService = subscriptionService;\n    this.router = router;\n    this.subscription = {};\n    this.paymentData = {\n      currency: 'USD'\n    };\n    this.errorMessage = null;\n    this.isRetrying = false;\n  }\n  ngOnInit() {\n    this.subid = +this.route.snapshot.paramMap.get('subid');\n    console.log('PaymentComponent initialized for subid:', this.subid);\n    this.route.queryParams.subscribe(params => {\n      console.log('Query params:', params);\n      if (params['retry'] === 'true') {\n        console.log('Retry flag detected. Initiating retry.');\n        this.isRetrying = true;\n        this.errorMessage = 'The previous payment link expired. Retrying with a new link...';\n        this.loadSubscriptionAndRetry();\n      } else {\n        console.log('No retry flag. Loading subscription normally.');\n        this.loadSubscription();\n      }\n    });\n  }\n  loadSubscription() {\n    console.log('Loading subscription for subid:', this.subid);\n    this.subscriptionService.getSubscription(this.subid).subscribe(data => {\n      console.log('Subscription loaded:', data);\n      this.subscription = data;\n      this.paymentData = {\n        subid: this.subid,\n        amount: data.subsDiscountedPrice.toFixed(2),\n        currency: 'USD',\n        description: data.subsDescription\n      };\n      this.checkStatus();\n    }, error => {\n      this.errorMessage = 'Failed to load subscription: ' + error.message;\n      console.error('Error loading subscription', error);\n    });\n  }\n  loadSubscriptionAndRetry() {\n    console.log('Loading subscription for retry, subid:', this.subid);\n    this.subscriptionService.getSubscription(this.subid).subscribe(data => {\n      console.log('Subscription loaded for retry:', data);\n      this.subscription = data;\n      this.paymentData = {\n        subid: this.subid,\n        amount: data.subsDiscountedPrice.toFixed(2),\n        currency: 'USD',\n        description: data.subsDescription\n      };\n      console.log('Starting payment retry with data:', this.paymentData);\n      this.startPayment();\n    }, error => {\n      this.errorMessage = 'Failed to load subscription for retry: ' + error.message;\n      console.error('Error loading subscription for retry', error);\n      this.isRetrying = false;\n      this.router.navigate(['/error'], {\n        queryParams: {\n          reason: 'Failed to load subscription for retry'\n        }\n      });\n    });\n  }\n  startPayment() {\n    if (!this.subscription.subid) {\n      this.errorMessage = 'Subscription not loaded yet. Please wait.';\n      console.warn('Attempted to start payment before subscription loaded.');\n      return;\n    }\n    console.log('Initiating payment with data:', this.paymentData);\n    this.subscriptionService.createPayment(this.paymentData).subscribe(response => {\n      console.log('Redirecting to PayPal:', response);\n      window.location.href = response;\n    }, error => {\n      this.errorMessage = 'Payment initiation failed: ' + error.message;\n      console.error('Payment initiation failed', error);\n      this.isRetrying = false;\n      this.router.navigate(['/error'], {\n        queryParams: {\n          reason: 'Payment initiation failed'\n        }\n      });\n    });\n  }\n  checkStatus() {\n    console.log('Checking status for subid:', this.subid);\n    this.subscriptionService.getStatus(this.subid).subscribe(status => {\n      console.log('Subscription status:', status);\n      if (status === 'success') {\n        this.router.navigate(['/success']);\n      } else if (status === 'cancelled' || status === 'failed') {\n        this.router.navigate(['/error'], {\n          queryParams: {\n            reason: 'Payment was cancelled or failed'\n          }\n        });\n      }\n    }, error => {\n      this.errorMessage = 'Status check failed: ' + error.message;\n      console.error('Status check failed', error);\n    });\n  }\n  cancelRetry() {\n    this.isRetrying = false;\n    this.router.navigate(['/']);\n  }\n  static {\n    this.ɵfac = function PaymentComponent_Factory(t) {\n      return new (t || PaymentComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.SubscriptionService), i0.ɵɵdirectiveInject(i1.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PaymentComponent,\n      selectors: [[\"app-payment\"]],\n      decls: 10,\n      vars: 4,\n      consts: [[1, \"subscriptions-display-container\"], [1, \"management-header\"], [1, \"payment-title\"], [1, \"header-subtitle\"], [\"class\", \"error-message\", \"style\", \"background: #fee2e2; color: #b91c1c; padding: 15px; border-radius: 8px; \\n              margin: 20px auto; max-width: 600px; text-align: center;\", 4, \"ngIf\"], [\"class\", \"loading-message\", \"style\", \"text-align: center; padding: 40px; color: #666;\", 4, \"ngIf\"], [\"class\", \"retry-section\", \"style\", \"background: #fff; border-radius: 12px; padding: 30px; max-width: 600px; \\n              margin: 0 auto; box-shadow: 0 4px 15px rgba(0,0,0,0.05); text-align: center;\", 4, \"ngIf\"], [\"class\", \"payment-box subscription-card\", \"style\", \"max-width: 600px; margin: 0 auto;\", 4, \"ngIf\"], [1, \"error-message\", 2, \"background\", \"#fee2e2\", \"color\", \"#b91c1c\", \"padding\", \"15px\", \"border-radius\", \"8px\", \"margin\", \"20px auto\", \"max-width\", \"600px\", \"text-align\", \"center\"], [\"shape\", \"error-standard\", 2, \"width\", \"20px\", \"height\", \"20px\", \"vertical-align\", \"middle\", \"margin-right\", \"8px\"], [1, \"loading-message\", 2, \"text-align\", \"center\", \"padding\", \"40px\", \"color\", \"#666\"], [\"shape\", \"hourglass\", 2, \"width\", \"24px\", \"height\", \"24px\", \"animation\", \"spin 1s linear infinite\"], [2, \"margin-top\", \"15px\"], [1, \"retry-section\", 2, \"background\", \"#fff\", \"border-radius\", \"12px\", \"padding\", \"30px\", \"max-width\", \"600px\", \"margin\", \"0 auto\", \"box-shadow\", \"0 4px 15px rgba(0,0,0,0.05)\", \"text-align\", \"center\"], [\"shape\", \"sync\", 2, \"width\", \"32px\", \"height\", \"32px\", \"color\", \"#3b82f6\", \"animation\", \"spin 1s linear infinite\"], [1, \"retry-text\", 2, \"font-size\", \"16px\", \"margin\", \"20px 0\"], [1, \"btn-subscribe\", 2, \"background\", \"linear-gradient(90deg, #ef4444, #f87171)\", 3, \"click\"], [1, \"payment-box\", \"subscription-card\", 2, \"max-width\", \"600px\", \"margin\", \"0 auto\"], [1, \"subscription-header\"], [1, \"subscription-title\"], [1, \"subscription-pricing\"], [1, \"discounted-price\"], [1, \"price-amount\"], [1, \"price-period\"], [1, \"actual-price\"], [1, \"subscription-actions\"], [1, \"btn-subscribe\", 2, \"padding\", \"12px 40px\", \"font-size\", \"16px\", 3, \"disabled\", \"click\"], [\"shape\", \"dollar-bill\", 2, \"width\", \"18px\", \"height\", \"18px\", \"margin-right\", \"8px\"], [2, \"margin-top\", \"20px\", \"text-align\", \"center\", \"font-size\", \"13px\", \"color\", \"#666\"], [\"shape\", \"shield-check\", 2, \"width\", \"16px\", \"height\", \"16px\", \"vertical-align\", \"middle\"]],\n      template: function PaymentComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n          i0.ɵɵtext(3, \"Confirm Payment\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"p\", 3);\n          i0.ɵɵtext(5, \"Review your payment details before proceeding\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(6, PaymentComponent_div_6_Template, 3, 1, \"div\", 4);\n          i0.ɵɵtemplate(7, PaymentComponent_div_7_Template, 4, 0, \"div\", 5);\n          i0.ɵɵtemplate(8, PaymentComponent_div_8_Template, 6, 0, \"div\", 6);\n          i0.ɵɵtemplate(9, PaymentComponent_div_9_Template, 21, 4, \"div\", 7);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.subscription.subid && !ctx.errorMessage && !ctx.isRetrying);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isRetrying);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.subscription.subid && !ctx.isRetrying);\n        }\n      },\n      dependencies: [i3.NgIf],\n      styles: [\"[_nghost-%COMP%] {\\n  margin-top: 80px;\\n  display: block;\\n  padding: 40px 20px;\\n  min-height: 100vh;\\n}\\n\\n.subscriptions-display-container[_ngcontent-%COMP%] {\\n  max-width: 1200px;\\n  margin: 0 auto;\\n}\\n\\n.management-header[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-bottom: 40px;\\n}\\n\\n.management-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  font-size: 32px;\\n  color: #3b82f6;\\n  position: relative;\\n  font-weight: 700;\\n  margin-bottom: 10px;\\n}\\n\\n.management-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]::after {\\n  content: '';\\n  position: absolute;\\n  bottom: -10px;\\n  left: 50%;\\n  transform: translateX(-50%);\\n  width: 60px;\\n  height: 4px;\\n  background: #2dd4bf;\\n  border-radius: 2px;\\n}\\n\\n.header-subtitle[_ngcontent-%COMP%] {\\n  font-size: 16px;\\n  color: #666;\\n  margin: 0;\\n}\\n\\n.subscriptions-grid[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\\n  gap: 30px;\\n}\\n\\n.subscription-card[_ngcontent-%COMP%] {\\n  background: #ffffff;\\n  border-radius: 12px;\\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);\\n  transition: all 0.3s ease;\\n  position: relative;\\n  overflow: hidden;\\n  padding: 30px;\\n  border: 2px solid transparent;\\n}\\n\\n.subscription-card[_ngcontent-%COMP%]:hover {\\n  transform: translateY(-5px);\\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\\n  border-color: #2dd4bf;\\n}\\n\\n.subscription-card.popular[_ngcontent-%COMP%] {\\n  border-color: #3b82f6;\\n  background: linear-gradient(180deg, rgba(59, 130, 246, 0.05), #ffffff);\\n}\\n\\n.popular-badge[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 15px;\\n  right: 15px;\\n  background: #3b82f6;\\n  color: #ffffff;\\n  font-size: 12px;\\n  font-weight: 600;\\n  padding: 5px 10px;\\n  border-radius: 12px;\\n  box-shadow: 0 2px 5px rgba(59, 130, 246, 0.3);\\n}\\n\\n.subscription-header[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-bottom: 20px;\\n}\\n\\n.subscription-title[_ngcontent-%COMP%] {\\n  font-size: 22px;\\n  font-weight: 700;\\n  color: #3b82f6;\\n  margin: 0 0 10px 0;\\n}\\n\\n.subscription-description[_ngcontent-%COMP%] {\\n  font-size: 14px;\\n  color: #666;\\n  margin: 0;\\n  line-height: 1.5;\\n}\\n\\n.subscription-pricing[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-bottom: 25px;\\n}\\n\\n.discounted-price[_ngcontent-%COMP%] {\\n  font-size: 28px;\\n  font-weight: 700;\\n  color: #2dd4bf;\\n  margin: 0;\\n  display: flex;\\n  justify-content: center;\\n  align-items: baseline;\\n  gap: 5px;\\n}\\n\\n.price-amount[_ngcontent-%COMP%] {\\n  font-size: 28px;\\n}\\n\\n.price-period[_ngcontent-%COMP%] {\\n  font-size: 14px;\\n  color: #666;\\n}\\n\\n.actual-price[_ngcontent-%COMP%] {\\n  font-size: 16px;\\n  color: #999;\\n  margin: 5px 0 0 0;\\n}\\n\\n.subscription-features[_ngcontent-%COMP%] {\\n  margin-bottom: 25px;\\n}\\n\\n.features-list[_ngcontent-%COMP%] {\\n  list-style: none;\\n  padding: 0;\\n  margin: 0;\\n  text-align: center;\\n}\\n\\n.features-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n  font-size: 14px;\\n  color: #333;\\n  margin-bottom: 10px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 8px;\\n}\\n\\n.features-list[_ngcontent-%COMP%]   clr-icon[_ngcontent-%COMP%] {\\n  color: #2dd4bf;\\n  width: 16px;\\n  height: 16px;\\n}\\n\\n.subscription-actions[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.btn-subscribe[_ngcontent-%COMP%] {\\n  background: linear-gradient(90deg, #3b82f6, #60a5fa);\\n  color: white;\\n  padding: 12px 30px;\\n  border: none;\\n  border-radius: 6px;\\n  font-size: 16px;\\n  font-weight: 600;\\n  cursor: pointer;\\n  transition: all 0.3s ease;\\n  box-shadow: 0 3px 10px rgba(59, 130, 246, 0.3);\\n}\\n\\n.btn-subscribe[_ngcontent-%COMP%]:hover {\\n  background: #2dd4bf;\\n  transform: scale(1.05);\\n  box-shadow: 0 5px 15px rgba(94, 234, 212, 0.4);\\n}\\n\\n.no-subscriptions[_ngcontent-%COMP%] {\\n  text-align: center;\\n  font-size: 16px;\\n  color: #666;\\n  padding: 20px;\\n}\\n\\n@media (max-width: 768px) {\\n  [_nghost-%COMP%] {\\n      padding: 20px 10px;\\n  }\\n\\n  .subscriptions-display-container[_ngcontent-%COMP%] {\\n      max-width: 100%;\\n  }\\n\\n  .management-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n      font-size: 28px;\\n  }\\n\\n  .header-subtitle[_ngcontent-%COMP%] {\\n      font-size: 14px;\\n  }\\n\\n  .subscription-card[_ngcontent-%COMP%] {\\n      padding: 20px;\\n  }\\n\\n  .subscription-title[_ngcontent-%COMP%] {\\n      font-size: 20px;\\n  }\\n\\n  .subscription-description[_ngcontent-%COMP%] {\\n      font-size: 13px;\\n  }\\n\\n  .discounted-price[_ngcontent-%COMP%]   .price-amount[_ngcontent-%COMP%] {\\n      font-size: 24px;\\n  }\\n\\n  .price-period[_ngcontent-%COMP%] {\\n      font-size: 12px;\\n  }\\n\\n  .actual-price[_ngcontent-%COMP%] {\\n      font-size: 14px;\\n  }\\n\\n  .features-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n      font-size: 13px;\\n  }\\n\\n  .btn-subscribe[_ngcontent-%COMP%] {\\n      padding: 10px 20px;\\n      font-size: 14px;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2hhcmVkL3BheW1lbnQvcGF5bWVudC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGNBQWM7RUFDZCxrQkFBa0I7RUFDbEIsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLGNBQWM7RUFDZCxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLFNBQVM7RUFDVCwyQkFBMkI7RUFDM0IsV0FBVztFQUNYLFdBQVc7RUFDWCxtQkFBbUI7RUFDbkIsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLFdBQVc7RUFDWCxTQUFTO0FBQ1g7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsMkRBQTJEO0VBQzNELFNBQVM7QUFDWDs7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQixtQkFBbUI7RUFDbkIsMENBQTBDO0VBQzFDLHlCQUF5QjtFQUN6QixrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGFBQWE7RUFDYiw2QkFBNkI7QUFDL0I7O0FBRUE7RUFDRSwyQkFBMkI7RUFDM0IseUNBQXlDO0VBQ3pDLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixzRUFBc0U7QUFDeEU7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsU0FBUztFQUNULFdBQVc7RUFDWCxtQkFBbUI7RUFDbkIsY0FBYztFQUNkLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLG1CQUFtQjtFQUNuQiw2Q0FBNkM7QUFDL0M7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixjQUFjO0VBQ2Qsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLFdBQVc7RUFDWCxTQUFTO0VBQ1QsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsY0FBYztFQUNkLFNBQVM7RUFDVCxhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLHFCQUFxQjtFQUNyQixRQUFRO0FBQ1Y7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGVBQWU7RUFDZixXQUFXO0VBQ1gsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFVBQVU7RUFDVixTQUFTO0VBQ1Qsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLFdBQVc7RUFDWCxtQkFBbUI7RUFDbkIsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsUUFBUTtBQUNWOztBQUVBO0VBQ0UsY0FBYztFQUNkLFdBQVc7RUFDWCxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0Usb0RBQW9EO0VBQ3BELFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZix5QkFBeUI7RUFDekIsOENBQThDO0FBQ2hEOztBQUVBO0VBQ0UsbUJBQW1CO0VBQ25CLHNCQUFzQjtFQUN0Qiw4Q0FBOEM7QUFDaEQ7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLFdBQVc7RUFDWCxhQUFhO0FBQ2Y7O0FBRUE7RUFDRTtNQUNJLGtCQUFrQjtFQUN0Qjs7RUFFQTtNQUNJLGVBQWU7RUFDbkI7O0VBRUE7TUFDSSxlQUFlO0VBQ25COztFQUVBO01BQ0ksZUFBZTtFQUNuQjs7RUFFQTtNQUNJLGFBQWE7RUFDakI7O0VBRUE7TUFDSSxlQUFlO0VBQ25COztFQUVBO01BQ0ksZUFBZTtFQUNuQjs7RUFFQTtNQUNJLGVBQWU7RUFDbkI7O0VBRUE7TUFDSSxlQUFlO0VBQ25COztFQUVBO01BQ0ksZUFBZTtFQUNuQjs7RUFFQTtNQUNJLGVBQWU7RUFDbkI7O0VBRUE7TUFDSSxrQkFBa0I7TUFDbEIsZUFBZTtFQUNuQjtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xuICBtYXJnaW4tdG9wOiA4MHB4O1xuICBkaXNwbGF5OiBibG9jaztcbiAgcGFkZGluZzogNDBweCAyMHB4O1xuICBtaW4taGVpZ2h0OiAxMDB2aDtcbn1cblxuLnN1YnNjcmlwdGlvbnMtZGlzcGxheS1jb250YWluZXIge1xuICBtYXgtd2lkdGg6IDEyMDBweDtcbiAgbWFyZ2luOiAwIGF1dG87XG59XG5cbi5tYW5hZ2VtZW50LWhlYWRlciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLWJvdHRvbTogNDBweDtcbn1cblxuLm1hbmFnZW1lbnQtaGVhZGVyIGgyIHtcbiAgZm9udC1zaXplOiAzMnB4O1xuICBjb2xvcjogIzNiODJmNjtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBmb250LXdlaWdodDogNzAwO1xuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xufVxuXG4ubWFuYWdlbWVudC1oZWFkZXIgaDI6OmFmdGVyIHtcbiAgY29udGVudDogJyc7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgYm90dG9tOiAtMTBweDtcbiAgbGVmdDogNTAlO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XG4gIHdpZHRoOiA2MHB4O1xuICBoZWlnaHQ6IDRweDtcbiAgYmFja2dyb3VuZDogIzJkZDRiZjtcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xufVxuXG4uaGVhZGVyLXN1YnRpdGxlIHtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBjb2xvcjogIzY2NjtcbiAgbWFyZ2luOiAwO1xufVxuXG4uc3Vic2NyaXB0aW9ucy1ncmlkIHtcbiAgZGlzcGxheTogZ3JpZDtcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCgzMDBweCwgMWZyKSk7XG4gIGdhcDogMzBweDtcbn1cblxuLnN1YnNjcmlwdGlvbi1jYXJkIHtcbiAgYmFja2dyb3VuZDogI2ZmZmZmZjtcbiAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDAsIDAsIDAsIDAuMDUpO1xuICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHBhZGRpbmc6IDMwcHg7XG4gIGJvcmRlcjogMnB4IHNvbGlkIHRyYW5zcGFyZW50O1xufVxuXG4uc3Vic2NyaXB0aW9uLWNhcmQ6aG92ZXIge1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTVweCk7XG4gIGJveC1zaGFkb3c6IDAgOHB4IDI1cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICBib3JkZXItY29sb3I6ICMyZGQ0YmY7XG59XG5cbi5zdWJzY3JpcHRpb24tY2FyZC5wb3B1bGFyIHtcbiAgYm9yZGVyLWNvbG9yOiAjM2I4MmY2O1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCByZ2JhKDU5LCAxMzAsIDI0NiwgMC4wNSksICNmZmZmZmYpO1xufVxuXG4ucG9wdWxhci1iYWRnZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAxNXB4O1xuICByaWdodDogMTVweDtcbiAgYmFja2dyb3VuZDogIzNiODJmNjtcbiAgY29sb3I6ICNmZmZmZmY7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgcGFkZGluZzogNXB4IDEwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDU5LCAxMzAsIDI0NiwgMC4zKTtcbn1cblxuLnN1YnNjcmlwdGlvbi1oZWFkZXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG59XG5cbi5zdWJzY3JpcHRpb24tdGl0bGUge1xuICBmb250LXNpemU6IDIycHg7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIGNvbG9yOiAjM2I4MmY2O1xuICBtYXJnaW46IDAgMCAxMHB4IDA7XG59XG5cbi5zdWJzY3JpcHRpb24tZGVzY3JpcHRpb24ge1xuICBmb250LXNpemU6IDE0cHg7XG4gIGNvbG9yOiAjNjY2O1xuICBtYXJnaW46IDA7XG4gIGxpbmUtaGVpZ2h0OiAxLjU7XG59XG5cbi5zdWJzY3JpcHRpb24tcHJpY2luZyB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLWJvdHRvbTogMjVweDtcbn1cblxuLmRpc2NvdW50ZWQtcHJpY2Uge1xuICBmb250LXNpemU6IDI4cHg7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIGNvbG9yOiAjMmRkNGJmO1xuICBtYXJnaW46IDA7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogYmFzZWxpbmU7XG4gIGdhcDogNXB4O1xufVxuXG4ucHJpY2UtYW1vdW50IHtcbiAgZm9udC1zaXplOiAyOHB4O1xufVxuXG4ucHJpY2UtcGVyaW9kIHtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBjb2xvcjogIzY2Njtcbn1cblxuLmFjdHVhbC1wcmljZSB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgY29sb3I6ICM5OTk7XG4gIG1hcmdpbjogNXB4IDAgMCAwO1xufVxuXG4uc3Vic2NyaXB0aW9uLWZlYXR1cmVzIHtcbiAgbWFyZ2luLWJvdHRvbTogMjVweDtcbn1cblxuLmZlYXR1cmVzLWxpc3Qge1xuICBsaXN0LXN0eWxlOiBub25lO1xuICBwYWRkaW5nOiAwO1xuICBtYXJnaW46IDA7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLmZlYXR1cmVzLWxpc3QgbGkge1xuICBmb250LXNpemU6IDE0cHg7XG4gIGNvbG9yOiAjMzMzO1xuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZ2FwOiA4cHg7XG59XG5cbi5mZWF0dXJlcy1saXN0IGNsci1pY29uIHtcbiAgY29sb3I6ICMyZGQ0YmY7XG4gIHdpZHRoOiAxNnB4O1xuICBoZWlnaHQ6IDE2cHg7XG59XG5cbi5zdWJzY3JpcHRpb24tYWN0aW9ucyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuXG4uYnRuLXN1YnNjcmliZSB7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzNiODJmNiwgIzYwYTVmYSk7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgcGFkZGluZzogMTJweCAzMHB4O1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBmb250LXdlaWdodDogNjAwO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7XG4gIGJveC1zaGFkb3c6IDAgM3B4IDEwcHggcmdiYSg1OSwgMTMwLCAyNDYsIDAuMyk7XG59XG5cbi5idG4tc3Vic2NyaWJlOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogIzJkZDRiZjtcbiAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTtcbiAgYm94LXNoYWRvdzogMCA1cHggMTVweCByZ2JhKDk0LCAyMzQsIDIxMiwgMC40KTtcbn1cblxuLm5vLXN1YnNjcmlwdGlvbnMge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgY29sb3I6ICM2NjY7XG4gIHBhZGRpbmc6IDIwcHg7XG59XG5cbkBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuICA6aG9zdCB7XG4gICAgICBwYWRkaW5nOiAyMHB4IDEwcHg7XG4gIH1cblxuICAuc3Vic2NyaXB0aW9ucy1kaXNwbGF5LWNvbnRhaW5lciB7XG4gICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gIH1cblxuICAubWFuYWdlbWVudC1oZWFkZXIgaDIge1xuICAgICAgZm9udC1zaXplOiAyOHB4O1xuICB9XG5cbiAgLmhlYWRlci1zdWJ0aXRsZSB7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gIH1cblxuICAuc3Vic2NyaXB0aW9uLWNhcmQge1xuICAgICAgcGFkZGluZzogMjBweDtcbiAgfVxuXG4gIC5zdWJzY3JpcHRpb24tdGl0bGUge1xuICAgICAgZm9udC1zaXplOiAyMHB4O1xuICB9XG5cbiAgLnN1YnNjcmlwdGlvbi1kZXNjcmlwdGlvbiB7XG4gICAgICBmb250LXNpemU6IDEzcHg7XG4gIH1cblxuICAuZGlzY291bnRlZC1wcmljZSAucHJpY2UtYW1vdW50IHtcbiAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgfVxuXG4gIC5wcmljZS1wZXJpb2Qge1xuICAgICAgZm9udC1zaXplOiAxMnB4O1xuICB9XG5cbiAgLmFjdHVhbC1wcmljZSB7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gIH1cblxuICAuZmVhdHVyZXMtbGlzdCBsaSB7XG4gICAgICBmb250LXNpemU6IDEzcHg7XG4gIH1cblxuICAuYnRuLXN1YnNjcmliZSB7XG4gICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9 */\", \"@keyframes _ngcontent-%COMP%_spin {\\n    0% { transform: rotate(0deg); }\\n    100% { transform: rotate(360deg); }\\n  }\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","errorMessage","ɵɵlistener","PaymentComponent_div_8_Template_button_click_4_listener","ɵɵrestoreView","_r5","ctx_r4","ɵɵnextContext","ɵɵresetView","cancelRetry","PaymentComponent_div_9_Template_button_click_15_listener","_r7","ctx_r6","startPayment","ɵɵtextInterpolate","ctx_r3","paymentData","amount","currency","description","ɵɵproperty","subscription","subid","PaymentComponent","constructor","route","subscriptionService","router","isRetrying","ngOnInit","snapshot","paramMap","get","console","log","queryParams","subscribe","params","loadSubscriptionAndRetry","loadSubscription","getSubscription","data","subsDiscountedPrice","toFixed","subsDescription","checkStatus","error","message","navigate","reason","warn","createPayment","response","window","location","href","getStatus","status","ɵɵdirectiveInject","i1","ActivatedRoute","i2","SubscriptionService","Router","selectors","decls","vars","consts","template","PaymentComponent_Template","rf","ctx","ɵɵtemplate","PaymentComponent_div_6_Template","PaymentComponent_div_7_Template","PaymentComponent_div_8_Template","PaymentComponent_div_9_Template"],"sources":["C:\\Users\\ufl\\Downloads\\sbitar\\front\\medilink-microfront\\src\\app\\shared\\payment\\payment.component.ts","C:\\Users\\ufl\\Downloads\\sbitar\\front\\medilink-microfront\\src\\app\\shared\\payment\\payment.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { SubscriptionService } from 'src/app/Services/subscription.service';\n\n@Component({\n  selector: 'app-payment',\n  templateUrl: './payment.component.html',\n  styleUrls: ['./payment.component.css']\n})\nexport class PaymentComponent implements OnInit {\n  subid!: number;\n  subscription: any = {};\n  paymentData: any = { currency: 'USD' };\n  errorMessage: string | null = null;\n  isRetrying: boolean = false;\n\n  constructor(\n    private route: ActivatedRoute,\n    private subscriptionService: SubscriptionService,\n    private router: Router\n  ) {}\n\n  ngOnInit() {\n    this.subid = +this.route.snapshot.paramMap.get('subid')!;\n    console.log('PaymentComponent initialized for subid:', this.subid);\n\n    this.route.queryParams.subscribe(params => {\n      console.log('Query params:', params);\n      if (params['retry'] === 'true') {\n        console.log('Retry flag detected. Initiating retry.');\n        this.isRetrying = true;\n        this.errorMessage = 'The previous payment link expired. Retrying with a new link...';\n        this.loadSubscriptionAndRetry();\n      } else {\n        console.log('No retry flag. Loading subscription normally.');\n        this.loadSubscription();\n      }\n    });\n  }\n\n  loadSubscription() {\n    console.log('Loading subscription for subid:', this.subid);\n    this.subscriptionService.getSubscription(this.subid).subscribe(\n      data => {\n        console.log('Subscription loaded:', data);\n        this.subscription = data;\n        this.paymentData = {\n          subid: this.subid,\n          amount: data.subsDiscountedPrice.toFixed(2),\n          currency: 'USD',\n          description: data.subsDescription\n        };\n        this.checkStatus();\n      },\n      error => {\n        this.errorMessage = 'Failed to load subscription: ' + error.message;\n        console.error('Error loading subscription', error);\n      }\n    );\n  }\n\n  loadSubscriptionAndRetry() {\n    console.log('Loading subscription for retry, subid:', this.subid);\n    this.subscriptionService.getSubscription(this.subid).subscribe(\n      data => {\n        console.log('Subscription loaded for retry:', data);\n        this.subscription = data;\n        this.paymentData = {\n          subid: this.subid,\n          amount: data.subsDiscountedPrice.toFixed(2),\n          currency: 'USD',\n          description: data.subsDescription\n        };\n        console.log('Starting payment retry with data:', this.paymentData);\n        this.startPayment();\n      },\n      error => {\n        this.errorMessage = 'Failed to load subscription for retry: ' + error.message;\n        console.error('Error loading subscription for retry', error);\n        this.isRetrying = false;\n        this.router.navigate(['/error'], { queryParams: { reason: 'Failed to load subscription for retry' } });\n      }\n    );\n  }\n\n  startPayment() {\n    if (!this.subscription.subid) {\n      this.errorMessage = 'Subscription not loaded yet. Please wait.';\n      console.warn('Attempted to start payment before subscription loaded.');\n      return;\n    }\n    console.log('Initiating payment with data:', this.paymentData);\n    this.subscriptionService.createPayment(this.paymentData).subscribe(\n      (response: string) => {\n        console.log('Redirecting to PayPal:', response);\n        window.location.href = response;\n      },\n      error => {\n        this.errorMessage = 'Payment initiation failed: ' + error.message;\n        console.error('Payment initiation failed', error);\n        this.isRetrying = false;\n        this.router.navigate(['/error'], { queryParams: { reason: 'Payment initiation failed' } });\n      }\n    );\n  }\n\n  checkStatus() {\n    console.log('Checking status for subid:', this.subid);\n    this.subscriptionService.getStatus(this.subid).subscribe(\n      (status: string) => {\n        console.log('Subscription status:', status);\n        if (status === 'success') {\n          this.router.navigate(['/success']);\n        } else if (status === 'cancelled' || status === 'failed') {\n          this.router.navigate(['/error'], { queryParams: { reason: 'Payment was cancelled or failed' } });\n        }\n      },\n      error => {\n        this.errorMessage = 'Status check failed: ' + error.message;\n        console.error('Status check failed', error);\n      }\n    );\n  }\n\n  cancelRetry() {\n    this.isRetrying = false;\n    this.router.navigate(['/']);\n  }\n}","<div class=\"subscriptions-display-container\">\n  <div class=\"management-header\">\n    <h2 class=\"payment-title\">Confirm Payment</h2>\n    <p class=\"header-subtitle\">Review your payment details before proceeding</p>\n  </div>\n\n  <div *ngIf=\"errorMessage\" class=\"error-message\" \n       style=\"background: #fee2e2; color: #b91c1c; padding: 15px; border-radius: 8px; \n              margin: 20px auto; max-width: 600px; text-align: center;\">\n    <clr-icon shape=\"error-standard\" style=\"width: 20px; height: 20px; vertical-align: middle; margin-right: 8px;\"></clr-icon>\n    {{ errorMessage }}\n  </div>\n\n  <div *ngIf=\"!subscription.subid && !errorMessage && !isRetrying\" class=\"loading-message\" \n       style=\"text-align: center; padding: 40px; color: #666;\">\n    <clr-icon shape=\"hourglass\" style=\"width: 24px; height: 24px; animation: spin 1s linear infinite;\"></clr-icon>\n    <p style=\"margin-top: 15px;\">Loading subscription details...</p>\n  </div>\n\n  <div *ngIf=\"isRetrying\" class=\"retry-section\" \n       style=\"background: #fff; border-radius: 12px; padding: 30px; max-width: 600px; \n              margin: 0 auto; box-shadow: 0 4px 15px rgba(0,0,0,0.05); text-align: center;\">\n    <clr-icon shape=\"sync\" style=\"width: 32px; height: 32px; color: #3b82f6; animation: spin 1s linear infinite;\"></clr-icon>\n    <p class=\"retry-text\" style=\"font-size: 16px; margin: 20px 0;\">Retrying payment... Please wait.</p>\n    <button class=\"btn-subscribe\" \n            style=\"background: linear-gradient(90deg, #ef4444, #f87171);\" \n            (click)=\"cancelRetry()\">\n      Cancel Retry\n    </button>\n  </div>\n\n  <div *ngIf=\"subscription.subid && !isRetrying\" class=\"payment-box subscription-card\" \n       style=\"max-width: 600px; margin: 0 auto;\">\n    <div class=\"subscription-header\">\n      <h3 class=\"subscription-title\">Payment Summary</h3>\n    </div>\n    \n    <div class=\"subscription-pricing\">\n      <div class=\"discounted-price\">\n        <span class=\"price-amount\">{{ paymentData.amount }}</span>\n        <span class=\"price-period\">{{ paymentData.currency }}</span>\n      </div>\n      <p class=\"actual-price\">for <em>{{ paymentData.description }}</em></p>\n    </div>\n\n    <div class=\"subscription-actions\">\n      <button class=\"btn-subscribe\" \n              (click)=\"startPayment()\" \n              [disabled]=\"!subscription.subid\"\n              style=\"padding: 12px 40px; font-size: 16px;\">\n        <clr-icon shape=\"dollar-bill\" style=\"width: 18px; height: 18px; margin-right: 8px;\"></clr-icon>\n        Pay with PayPal\n      </button>\n    </div>\n    \n    <div style=\"margin-top: 20px; text-align: center; font-size: 13px; color: #666;\">\n      <clr-icon shape=\"shield-check\" style=\"width: 16px; height: 16px; vertical-align: middle;\"></clr-icon>\n      Secure payment processed by PayPal\n    </div>\n  </div>\n</div>\n\n<style>\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}